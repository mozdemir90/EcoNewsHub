<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kelime Birliktelikleri (Co-occurrence)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #F5F7FA; }
        .container { background:#fff; max-width: 1000px; margin: 30px auto; padding: 24px; border-radius: 10px; box-shadow: 0 4px 24px #b0b8c1; }
        h2 { color: #34495E; margin-top: 0; }
        .topbar { display:flex; justify-content: space-between; align-items:center; margin-bottom: 12px; }
        .btn { background:#3B82F6; color:#fff; border:none; padding:8px 12px; border-radius:6px; text-decoration:none; font-size: 0.95em; cursor:pointer; }
        .btn:hover { background:#2563EB; }
        input, select { padding:8px 10px; border:1px solid #CED4DA; border-radius:6px; }
        table { width:100%; border-collapse: collapse; margin-top: 14px; }
        th, td { text-align:left; border-bottom:1px solid #E5E7EB; padding:8px 10px; }
        th { background:#F3F4F6; color:#374151; }
        .muted { color:#6b7280; }
        .controls { display:flex; gap:10px; align-items:center; flex-wrap: wrap; }
    </style>
</head>
<body>
<div class="container">
    <div class="topbar">
        <h2>Kelime Birliktelikleri</h2>
        <a href="/" class="btn">Geri Dön</a>
    </div>
    {% if not enabled %}
    <div>Vektör veritabanı etkin değil.</div>
    {% else %}
    <form method="get" class="controls">
        <label>Filtre (metin içerir): <input type="text" name="q" value="{{ q }}" placeholder="opsiyonel"></label>
        <label>n-gram: 
            <select name="n">
                <option value="2" {% if n == 2 %}selected{% endif %}>2 (ikili)</option>
                <option value="3" {% if n == 3 %}selected{% endif %}>3 (üçlü)</option>
            </select>
        </label>
        <label>Min. frekans: <input type="number" name="min_count" min="1" value="{{ min_count }}"></label>
        <button class="btn" type="submit">Sorgula</button>
    </form>
    <p class="muted">Aşağıda seçili n-gramlara ait sıklıklar ve ortalama skorlar listelenir.</p>
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>n-gram</th>
                <th>Frekans</th>
                <th>Dolar Avg</th>
                <th>Altın Avg</th>
                <th>Borsa Avg</th>
                <th>Bitcoin Avg</th>
            </tr>
        </thead>
        <tbody>
            {% for r in results %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ r.ngram }}</td>
                <td>{{ r.count }}</td>
                <td>{{ r.dolar_avg }}</td>
                <td>{{ r.altin_avg }}</td>
                <td>{{ r.borsa_avg }}</td>
                <td>{{ r.bitcoin_avg }}</td>
            </tr>
            {% endfor %}
            {% if not results %}
            <tr><td colspan="7" class="muted">Sonuç yok</td></tr>
            {% endif %}
        </tbody>
    </table>
    {% endif %}
</div>
</body>
</html>
